/dts-v1/;
#include <st/f4/stm32f407Xg.dtsi>
#include <st/f4/stm32f407i(e-g)tx-pinctrl.dtsi>

/ {
  model = "Tekdaqc Rev E";
  compatible = "tk,tekdaqc_e";

  chosen {
    zephyr,console = &usart2;
    zephyr,shell-uart = &usart2;
    zephyr,sram = &sram0;
    zephyr,flash = &flash0;
  };

  leds {
    compatible = "gpio-leds";
    test_pin_1: led_1 {
      gpios = <&gpiog 6 GPIO_ACTIVE_HIGH>;
      label = "Test Pin 1";
    };
    test_pin_2: led_2 {
      gpios = <&gpiog 8 GPIO_ACTIVE_HIGH>;
      label = "Test Pin 2";
    };
    test_pin_3: led_3 {
      gpios = <&gpioi 8 GPIO_ACTIVE_HIGH>;
      label = "Test Pin 3";
    };
    test_pin_4: led_4 {
      gpios = <&gpioi 10 GPIO_ACTIVE_HIGH>;
      label = "Test Pin 4";
    };
  };

  gpi_connector: connector {
    compatible = "tekdaqc-gpi";
    #gpio-cells = <2>;
    gpio-map-mask = <0xffffffff 0xffffffc0>;
    gpio-map-pass-thru = <0 0x3f>;
    gpio-map =  <0 0 &gpioe 5 0>,    // E5
                <1 0 &gpioe 4 0>,    // E4
                <2 0 &gpioi 8 0>,    // I8
                <3 0 &gpioi 11 0>,   // I11
                <4 0 &gpioh 3 0>,    // H3
                <5 0 &gpioh 4 0>,    // H4
                <6 0 &gpiof 11 0>,   // F11
                <7 0 &gpiof 15 0>,   // F15
                <8 0 &gpioe 8 0>,    // E8
                <9 0 &gpioe 12 0>,   // E12
                <10 0 &gpioh 6 0>,   // H6
                <11 0 &gpioh 11 0>,  // H11
                <12 0 &gpioe 3 0>,   // E3
                <13 0 &gpioe 2 0>,   // E2
                <14 0 &gpioe 6 0>,   // E6
                <15 0 &gpioh 5 0>,   // H5
                <16 0 &gpiof 9 0>,   // F9
                <17 0 &gpioh 2 0>,   // H2
                <18 0 &gpiob 1 0>,   // B1
                <19 0 &gpiof 13 0>,  // F13
                <20 0 &gpiog 1 0>,   // G1
                <21 0 &gpioe 10 0>,  // E10
                <22 0 &gpioh 8 0>,   // H8
                <23 0 &gpioh 10 0>;  // H10
  };
};

&usart2 {
  pinctrl-0 = <&usart2_tx_pd5 &usart2_rx_pd6>;
  current-speed = <115200>;
  status = "okay";
};

&usart3 {
  pinctrl-0 = <&usart3_tx_pd8 &usart3_rx_pd9>;
  current-speed = <115200>;
  status = "okay";
};

&rtc { status = "okay"; };

&rng { status = "okay"; };

&spi2 {
  pinctrl-0 = <&spi2_sck_pb10 &spi2_miso_pb14 &spi2_mosi_pi3>;
  status = "okay";
};

&mac {
  pinctrl-0 = <&eth_ref_clk_pa1 &eth_mdio_pa2 &eth_crs_dv_pa7 &eth_tx_en_pb11 &eth_txd1_pb13 &eth_mdc_pc1 &eth_rxd0_pc4 &eth_rxd1_pc5 &eth_txd0_pg13>;
  local-mac-address = [00 80 E1 00 00 00];
  status = "okay";
};